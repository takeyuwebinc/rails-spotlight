---
title: 「Tidy First?」を読んだ
slug: book-review-tidy-first
category: article
published_date: 2025-08-23
description: Kent Beckによるリファクタリングの新しい視点「整頓」について、ソフトウェア設計の本質を経験主義的アプローチから解説した本。設計とは何か、いつどのように行うべきかを実践と理論の両面から学べました。
tags:
  - Book Review
  - Refactoring
  - Software Design
  - Clean Code
---

## はじめに

設計技法についてのヒントを得たいと思い、Kent Beckの「Tidy First?」を手に取りました。リファクタリングという言葉の意味が希薄化した現代において、新たに「整頓（Tidy）」という概念を提唱する本書に興味を持ちました。

期待していた「設計技法」の本ではありませんでしたが、それ以上に価値のある内容でした。ソフトウェア設計とは何か、いつやるべきか、という根本的な問いに対する答えが詰まっていました。リファクタリングが「なぜ大事なのか」「いつやるべきか」を自分で考えられるようになる、今後何度も読み返したくなる本です。

https://www.oreilly.co.jp/books/9784814400911/

## 概要

本書は、ソフトウェア設計を「要素を役立つように関連付けること」と定義し、コードの変更を「構造の整頓」と「振る舞いの変更」に分けて考える新しいアプローチを提示しています。

「リファクタリング」という言葉が本来の定義から離れてしまったため、そのサブセットとして「整頓（Tidy）」という概念を導入。具体的な整頓のテクニックから始まり、管理術、そして理論へと進む構成で、実践と理論の両面から学べる設計書です。

:::details 経験主義的ソフトウェア設計とは
本書のサブタイトルにもなっている「経験主義的ソフトウェア設計」とは、理論や純粋な論理よりも、観察・実験・体験を通じて得られる知識を重視するアプローチです。

哲学における経験主義（empiricism）は、知識の源泉を感覚的経験に求める立場ですが、Kent Beckはこれをソフトウェア開発に応用しています。

具体的には：
- **まず小さく実装して試す**（理論的な完璧さを追求する前に）
- **実際の使用結果から学ぶ**
- **フィードバックに基づいて設計を改善する**
- **継続的な学習と修正を前提とする**

これは従来の「最初から完璧な設計を目指す」アプローチとは対照的で、実験と改善のサイクルを通じてより良いソフトウェアを作っていく考え方です。「いつどれだけ設計するか？」という問いに対して「時と場合による。ニーズに合わせて適切に行う」という答えが、まさに経験主義的なアプローチを表しています。
:::

## 各章の詳細

### 第1章：整頓 ― **具体的なテクニック集**

本章では、今日から使える15の整頓テクニックが紹介されています。ガード節、デッドコード削除、シンメトリーを揃える、新しいインターフェイスの作成など、どれも実践的で即効性のある内容です。

特に印象的だったのは「リファクタリング」という言葉が「振る舞いを変更することなく」という条項を失い、致命傷を負ったという指摘です。だからこそ、小さく安全な構造変更としての「整頓」が必要になったのです。

:::message
「新しいインターフェイス、古い実装」のテクニックは、扱いづらいインターフェイスに対して、まず使いやすいインターフェイスを作ってから実装を移行するという発想で、日々のコーディングで活用できそうです。
:::

> 「リファクタリング」という言葉は、機能開発の長い中断を指す言葉として使われ始めたときに致命傷を負った。「振る舞いを変更することなく」という条項さえもなきものにされ、「リファクタリング」は簡単にシステムを破壊できるようになった。
> p. 7

また、「読む順番」や「凝集の順番」といった、コードの配置に関する整頓も重要です。関係するものは近くに置く、理解に役立つものを先に配置するという原則は、コードの可読性を大きく向上させます。

### 第2章：管理術 ― **整頓のタイミングと戦略**

整頓の技術を身につけても、いつ整頓すべきか、いつやめるべきかの判断が重要です。本章では、プルリクエストの粒度、バッチサイズ、整頓のリズムなど、実際のプロジェクトで直面する管理上の課題を扱います。

「分けて整頓する」の原則は特に重要で、振る舞いの変更と構造の変更を別々のプルリクエストにすることで、レビューが容易になり、リスクも低減できます。チームに信頼があれば、小さな整頓にはレビューが不要になるという指摘も興味深いです。

:::message
1時間以内の整頓に留める、変更が集中する20%のコードに注力する、という実践的なアドバイスは、日々の開発で意識したいポイントです。
:::

先に整頓するか、後に整頓するか、あるいは整頓しないかの判断基準も明確に示されています。整頓して変更した方が、先に変更するよりもコストが安くつくなら整頓する、というシンプルな原則が基本です。

### 第3章：理論 ― **ソフトウェア設計の本質**

最終章では、整頓という具体的な活動の背後にある理論を解説します。ソフトウェア設計とは「要素を役立つように関連付けること」であり、構造と振る舞いの違い、時間価値とオプショナリティ、結合と凝集といった概念を通じて、設計の本質に迫ります。

特に印象的だったのは「コンスタンチンの等価性」です。ソフトウェアのコストは変更のコストとほぼ等しく、大きな変更のコストは結合とほぼ等しい。つまり、ソフトウェアのコストを下げるには結合を減らすことが重要という洞察は、設計の重要性を端的に表しています。

:::message
オプション価値の考え方も重要です。「次にどのような振る舞いを実装できるか」という可能性に価値があり、不確実性が高いほどオプション価値が大きくなるという視点は、アジャイル開発の本質を突いています。
:::

> 理論や純粋な論理よりも、観察や経験にもとづいていて、観察や経験と関連があり、観察や経験によって証明できる
> p. はじめに xvvviii

経験主義的ソフトウェア設計という本書のアプローチは、まず小さく実装して試し、フィードバックから学び、継続的に改善するという現代的な開発スタイルと完全に一致しています。

## 実務への応用

本書で学んだ整頓の考え方は、日々のコードレビューやリファクタリングの判断に直接活用できます。特に以下の点を意識して実践していきたいです。

- プルリクエストを構造変更と振る舞い変更に分ける
- 1時間以内の整頓を心がける
- 変更が頻繁な箇所に整頓を集中する
- 整頓のコストと効果を常に意識する

## 良かった点

- 具体的なテクニックから理論まで、段階的に理解を深められる構成
- プルリクエストの粒度など、実際の開発現場で議論になる内容を扱っている
- 経済性の観点から設計を考える新しい視点
- 短くて読みやすく、何度も読み返せる

## 改善を期待する点

- 大規模システムでの適用例があるとより実践的
- チーム開発における整頓の進め方についてもう少し詳しく知りたい
- 整頓の効果測定方法について具体的な指標があるとよい

## おすすめ度

:::rating 5

- リファクタリングの判断に迷うエンジニアにおすすめ
- チームで設計の重要性について建設的な議論をしたい人に
- ある程度のプログラミング経験があることが前提
- Martin Fowlerの「リファクタリング」を読んでいるとより理解が深まる

## まとめ

期待していた「設計技法」の本ではありませんでしたが、「ソフトウェア設計とは何か」「いつやるべきか」という、より本質的な問いに答えてくれる素晴らしい本でした。

整頓はソフトウェア設計そのものであり、設計は要素を役立つように関連付けることです。この視点を持つことで、日々のコーディングにおいて、いつ、どのように構造を改善すべきかを判断できるようになります。今後も繰り返し読み返し、実践を通じて理解を深めていきたい一冊です。