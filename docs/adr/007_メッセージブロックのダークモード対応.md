# ADR 007: メッセージブロックのダークモード対応

## ステータス

承認済み

## コンテキスト

既存のカスタムMarkdown拡張機能には、以下の3種類のメッセージブロックが実装されていました：

1. 通常のメッセージブロック (`:::message`)
2. アラートメッセージブロック (`:::message alert`)
3. 詳細ブロック (`:::details`)

これらのブロックはライトモードのみに対応しており、ダークモードでの表示が適切ではありませんでした。アプリケーションには既にTailwindCSSのダークモード機能とテーマ切り替え機能が実装されているため、メッセージブロックもダークモードに対応する必要がありました。

## 決定

TailwindCSSの`dark:`プレフィックスを使用して、各メッセージブロックにダークモード対応のクラスを追加しました。

### 実装内容

#### 1. 通常のメッセージブロック
- **ライトモード**: `bg-amber-50`, `border-amber-400`, `text-amber-800`
- **ダークモード**: `dark:bg-amber-900/20`, `dark:border-amber-500`, `dark:text-amber-200`

#### 2. アラートメッセージブロック
- **ライトモード**: `bg-red-50`, `border-red-400`, `text-red-800`
- **ダークモード**: `dark:bg-red-900/20`, `dark:border-red-500`, `dark:text-red-200`

#### 3. 詳細ブロック
- **ライトモード**: `border-gray-200`, `text-gray-700`, `bg-gray-50`, `text-gray-600`
- **ダークモード**: `dark:border-gray-700`, `dark:text-gray-300`, `dark:bg-gray-800`, `dark:text-gray-400`

### 変更箇所

- `lib/custom_html_renderer.rb`の`convert_custom_placeholder_to_html`メソッド内のHTMLテンプレートを更新
- 既存のテストを更新してダークモード対応のクラスを検証

## 理由

1. **一貫性**: アプリケーション全体でダークモードが統一されている
2. **ユーザビリティ**: ダークモードでもメッセージブロックが適切に表示される
3. **アクセシビリティ**: 適切なコントラスト比を維持
4. **保守性**: TailwindCSSの標準的な`dark:`プレフィックスを使用

## 影響

### 正の影響
- ダークモードでのユーザー体験が向上
- 既存の機能に影響を与えない
- テーマ切り替え時に自動的に適用される

### 考慮事項
- 既存のテストを更新する必要があった
- 新しいクラス名を覚える必要がある（開発者向け）

## 実装日

2025年5月24日
