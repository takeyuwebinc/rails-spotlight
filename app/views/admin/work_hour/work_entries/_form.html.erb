<%= form_with(model: @work_entry, url: @work_entry.new_record? ? admin_work_hour_work_entries_path : admin_work_hour_work_entry_path(@work_entry), class: "space-y-6") do |form| %>
  <% if @work_entry.errors.any? %>
    <div class="rounded-md bg-red-50 p-4">
      <div class="flex">
        <div class="ml-3">
          <h3 class="text-sm font-medium text-red-800"><%= pluralize(@work_entry.errors.count, "error") %>:</h3>
          <div class="mt-2 text-sm text-red-700">
            <ul class="list-disc space-y-1 pl-5">
              <% @work_entry.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        </div>
      </div>
    </div>
  <% end %>

  <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
    <div>
      <%= form.label :worked_on, "作業日", class: "block text-sm font-medium text-zinc-700" %>
      <%= form.date_field :worked_on, class: "mt-1 block w-full rounded-md border-zinc-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
    </div>

    <div>
      <%= form.label :target_month, "対象月", class: "block text-sm font-medium text-zinc-700" %>
      <%= form.month_field :target_month, class: "mt-1 block w-full rounded-md border-zinc-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
    </div>

    <div>
      <%= form.label :project_id, "案件", class: "block text-sm font-medium text-zinc-700" %>
      <%= form.select :project_id, @projects.map { |p| [p.name, p.id, { style: "border-left: 4px solid #{p.color}; padding-left: 8px;" }] }, { include_blank: "その他" }, class: "mt-1 block w-full rounded-md border-zinc-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" %>
    </div>

    <div>
      <%= form.label :minutes, "工数（分）", class: "block text-sm font-medium text-zinc-700" %>
      <%= form.number_field :minutes, min: 1, class: "mt-1 block w-full rounded-md border-zinc-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm", placeholder: "例: 60" %>
      <p class="mt-1 text-xs text-zinc-500">よく使う値: 30分, 60分, 90分, 120分, 240分, 480分</p>
    </div>
  </div>

  <div>
    <%= form.label :description, "業務内容", class: "block text-sm font-medium text-zinc-700" %>
    <%= form.text_area :description, rows: 3, class: "mt-1 block w-full rounded-md border-zinc-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm", placeholder: "作業の説明を入力" %>
  </div>

  <div class="flex justify-between">
    <div>
      <% unless @work_entry.new_record? %>
        <%= link_to "削除", admin_work_hour_work_entry_path(@work_entry), method: :delete, data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" }, class: "rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500" %>
      <% end %>
    </div>
    <div class="flex space-x-3">
      <%= link_to "キャンセル", admin_work_hour_work_entries_path(date: @work_entry.worked_on || Date.current), class: "rounded-md bg-white px-3 py-2 text-sm font-semibold text-zinc-900 shadow-sm ring-1 ring-inset ring-zinc-300 hover:bg-zinc-50" %>
      <%= form.submit @work_entry.new_record? ? "登録" : "更新", class: "rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 cursor-pointer" %>
    </div>
  </div>
<% end %>
